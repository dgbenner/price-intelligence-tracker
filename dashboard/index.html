<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price Intelligence Dashboard - Chronic Condition Supplies</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Price Intelligence Dashboard</h1>
        <p class="subtitle">Chronic Condition Supply Price Tracker</p>
        <!-- <div class="affiliate-disclosure">
            <small>Affiliate disclosure: This site earns from qualifying purchases</small>
        </div> -->
    </header>

    <main id="dashboard">
        <!-- Brand containers will be dynamically inserted here -->
    </main>

    <!-- Savings Calculator Modal -->
    <div id="savings-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Savings Calculator</h2>
            <div id="modal-body">
                <p id="savings-calculation"></p>
                <div class="dca-explanation">
                    <p><strong>What is Dollar Cost Averaging?</strong></p>
                    <p>Dollar cost averaging means buying regularly at the average price over time, rather than trying to time the market for the absolute lowest price. By tracking prices and buying at the best average price point, you minimize cost while maintaining a consistent supply.</p>
                    <a href="https://www.investopedia.com/terms/d/dollarcostaveraging.asp" target="_blank" rel="noopener">Learn more about dollar cost averaging</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div id="add-product-modal" class="modal">
        <div class="modal-content add-product-modal-content">
            <span class="close">&times;</span>
            <h2 id="add-product-brand-name"></h2>
            <div class="add-product-list">
                <!-- Product options will be populated dynamically -->
            </div>
            <div class="add-product-footer">
                <button class="add-product-cancel">Cancel</button>
                <button class="add-product-save">Save</button>
            </div>
        </div>
    </div>

    <!-- Template for brand container -->
    <template id="brand-container-template">
        <section class="brand-container">
            <div class="brand-header">
                <div class="brand-header-left">
                    <h2 class="brand-name"></h2>
                    <button class="add-product-btn" aria-label="Add a product">+ Add Product</button>
                </div>
                <button class="collapse-toggle" aria-label="Toggle products">▼</button>
            </div>
            <div class="products-wrapper">
                <!-- Products will be inserted here -->
            </div>
        </section>
    </template>

    <!-- Template for product row -->
    <template id="product-row-template">
        <article class="product-row">
            <div class="product-summary">
                <div class="product-image-wrapper">
                    <img class="product-image" src="" alt="">
                    <span class="product-size-tag"></span>
                </div>
                <h3 class="product-name"></h3>
                <div class="callout-pair">
                    <div class="callout-card callout-best-price">
                        <div class="callout-header">
                            <span class="callout-check">✓</span>
                            <span class="callout-label">Today's Best Price</span>
                            <button class="callout-info" aria-label="About today's best price">ⓘ</button>
                        </div>
                        <div class="callout-body">
                            <img class="callout-retailer-logo" src="" alt="">
                            <span class="callout-price"></span>
                        </div>
                        <a href="#" class="savings-link">How much can I save?</a>
                        <div class="callout-tooltip hidden">
                            Today's best price shows the lowest current price among all tracked retailers for this product.
                        </div>
                    </div>
                    <div class="callout-card callout-best-value">
                        <div class="callout-header">
                            <span class="callout-check">✓</span>
                            <span class="callout-label">Consistent Best Value</span>
                            <button class="callout-info" aria-label="About consistent best value">ⓘ</button>
                        </div>
                        <div class="callout-body">
                            <img class="callout-retailer-logo" src="" alt="">
                            <span class="callout-price"></span>
                        </div>
                        <span class="callout-subtitle"></span>
                        <div class="callout-tooltip hidden">
                            Consistent best value is determined by the lowest average price across all tracked time periods.
                        </div>
                    </div>
                </div>
            </div>

            <div class="price-chart-wrapper">
                <div class="time-range-controls">
                    <button class="range-btn active" data-range="all">All</button>
                    <button class="range-btn" data-range="7">7d</button>
                    <button class="range-btn" data-range="30">30d</button>
                    <button class="range-btn" data-range="60">60d</button>
                    <button class="range-btn" data-range="90">90d</button>
                </div>
                <canvas class="price-chart"></canvas>
                <div class="chart-legend"></div>
                <div class="trend-insights">
                    <div class="insights-header">
                        <span class="insights-title">Emerging Patterns & Insights</span>
                        <span class="insights-badge">Beta</span>
                    </div>
                    <div class="insights-scroll">
                        <!-- Insight cards will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="retailer-stats">
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>Retailer</th>
                            <th class="th-price">High</th>
                            <th class="th-price">Low</th>
                            <th class="th-price">Avg</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Retailer rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </article>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
